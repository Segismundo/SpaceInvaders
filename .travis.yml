sudo: required
language: android
jdk: oraclejdk8

before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm - fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
   - $HOME/.gradle/caches
   - $HOME/.gradle/wrapper/

env:
  global:
  - secure: NDfLURDgVvJqcsHeIWPrcONfhDHeIa52KfyK+vEGrESf+MhxtzXs/e6SsXF8ZGY2WpmiMGDIBA/ZPW+/bXn5C9DtZvkXOUXG+pfEzp5Gp7XwEPgZF7o/KbkvX+7K2mSLNRKZMIIfI2Ct3zeFX5rKnfbo726Hh02RnTEWjo3ghtXbdNHp4x4fCk6AC8OHc90gmRUtHKUF89+eegr5E36Vu0LIK7/jwemG+yXe/CkDX7/8QjOQipObdk+M0nGJXvwfxM6B+K2NXzjx1/KQ1zmaQTNzKTWHPW35nfJ/lQH+XsFj0KjrVbKg6n7P8mVZYFw7TmKWT3piWFXejWMdqLwxaza0Q+bTNDAn3O931VN+9EuZROoUR3tlHEMMv2CFr4TVs6kF0pyVJYL2gzAsM1s0F6kxqGvXLGBj68jXesnQkKQntjZ60crCu2xwICaJ9XTN/bKLk8JLH2kELq5bCv8R+BbBx+1TZcjcrnX3BxzMZBAMjOPbGKnHDhdVxrtQstLawxgI0hIeEcQNWM3xXByOfx+rOXDtMsVMM76AqR9FICmkelKJmklFdP4b0qHxxEK8YAtYOlRoKLy2Ywa7Cn3rG3bAr78k59TWAAbyfLIrkd0nMqTVUSg24wF35abCIH5UDcQI+U35Yamzi21/R/zRszjBCw1+IEJ4pcb0u1+B4JU=
  - secure: myLa+mYy0XrC/vjwRfpCOcdCiBWXj9bCwK7ub+FG5pdrquiHw6gxCD0wBABEmPyNYIRj2iqe0fhtwlGCNBVWeltxpXu1KhTMZ0mMsg+RiHdKEMrrcEX64Am66XOHQQ7tY2OHLJQgUmVuhRSx8t5SFcaNM0Rnc4jBfOJPM23d2f4egM3fMJTIQkqqPB76ntacY/tFSxAsFgUyT4tINiNhL8FGrY9PkOrvreWaIdwa181999SaRbsTxKEhIHiN1/nkxtiuNox3nfpUULuP3YNBeifIL1U/hVwzboxUlTXy6qRTa2OuUNIGZQu9XRpxWMG/kfpsfkM1K5kPEJEuy3NA19p+5EcizBq+3XzJBoPN4RGdJTEAmTYxdU3q1y8Dni+wPem/klspIJV4EHes55WEjlAm96dnSPP0KihjUsUooU+d9O7YJCRJFCLrtir9s2Hsx+8DHjta8AjMdf2LClWvY0mE7iexQSG3phoha9mmcCQWXJNStY3+hxWUwTFCqpXeCLk3O3ExxEFVTqOEG/hufhSCgnIOgNe742oTBSAFxKG4wJXp7erb0IlP8Ne/3OOM7TOVYSOPcJgYzXxBRqCV0reSyPm9fgsGzuf0jUTZLMkhOsfqADrg9/JwcYW3J17h60tY6eyZiwWsHmhxkDGI+LnFUCiLGQP5Ecf3s0qwOGA=

android:
  components:
  - platform-tools
  - tools
  - android-28
  - build-tools-28.0.3
  - extra

before_deploy:
- cd -

before_install:
- chmod +x gradlew
- yes | sdkmanager "platforms;android-28"

script:
- ./gradlew clean
- ./gradlew assembleDebug
- ./gradlew assembleDebugAndroidTest

 
deploy:
  provider: releases
  api_key: $GITHUB_TOKEN
  file:
    - "app/**"
  skip_cleanup: true
  on:
    tags: false

